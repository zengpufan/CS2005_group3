{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      form: {\n        username: '',\n        password: ''\n      },\n      // 表单验证， 需要在el-form-item- 元素中增加prop属性\n      rules: {\n        username: [{\n          required: true,\n          message: '账号不可为空',\n          trigger: 'blur'\n        }],\n        password: [{\n          required: true,\n          message: '密码不可为空',\n          trigger: 'blur'\n        }]\n      },\n      //对话框显示和隐藏\n      dialogVisible: false\n    };\n  },\n  methods: {\n    handleClose: function () {\n      console.log(\"Handle Close，空函数\");\n    },\n    onSubmit(formName) {\n      //为表单绑定验证功能\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          this.$axios.post('/login', {\n            username: this.form.username,\n            password: this.form.password\n          }).then(response => {\n            // if (response.data.code === 20000) {\n            //使用vue-router 路由到指定页面，该方式称之为编程式导航\n            this.$router.push({\n              path: \"/index\",\n              query: {\n                username: response.data.data.username\n              }\n            });\n            console.log(response.data);\n            this.$message.success(response.data.msg);\n            // } else\n            //{\n            //     console.log(response.data);\n            //     this.$message.error(this.form.username + response.data.msg)\n            //}\n          });\n        } else {\n          this.dialogVisible = true;\n          return false;\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["name","data","form","username","password","rules","required","message","trigger","dialogVisible","methods","handleClose","console","log","onSubmit","formName","$refs","validate","valid","$axios","post","then","response","$router","push","path","query","$message","success","msg"],"sources":["src/views/Login.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" label width=\" 80px\" class=\"login-box\">\r\n            <h3 class=\"login-title\">欢迎登录</h3>\r\n            <el-form-item label=\"账号\" prop=\"username\">\r\n                <el-input type=\"text\" placeholder=\" 请输入账号\" v-model=\"form.username\"/>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n                <el-input type=\"password\" placeholder=\" 请输入密码\" v-model=\" form.password\"/>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" v-on:click=\"onSubmit('loginForm')\">登录</el-button>\r\n                <el-button type=\"primary\" v-on:click=\"$router.push('/register')\">注册</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-dialog\r\n                title=\"温馨提示\"\r\n                :visible.sync=\"dialogVisible\"\r\n                width=\"30%\"\r\n                :before-close=\"handleClose\">\r\n            <span>请输入账号和密码</span>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n<el-button type=\"primary\" @click=\"dialogVisible = false\">确 定</el-button>\r\n      </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"Login\",\r\n    data() {\r\n        return {\r\n\r\n            form: {\r\n                username: '',\r\n                password: ''\r\n            },\r\n// 表单验证， 需要在el-form-item- 元素中增加prop属性\r\n            rules: {\r\n                username: [{required: true, message: '账号不可为空', trigger: 'blur'}],\r\n                password: [{required: true, message: '密码不可为空', trigger: 'blur'}]\r\n            },\r\n//对话框显示和隐藏\r\n            dialogVisible: false\r\n        }\r\n    },\r\n    methods: {\r\n        handleClose: function () {\r\n            console.log(\"Handle Close，空函数\");\r\n        },\r\n        onSubmit(formName) {\r\n            //为表单绑定验证功能\r\n            this.$refs [formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.$axios.post('/login', {\r\n                        username: this.form.username,\r\n                        password: this.form.password\r\n                    }).then(response => {\r\n                        // if (response.data.code === 20000) {\r\n                        //使用vue-router 路由到指定页面，该方式称之为编程式导航\r\n                        this.$router.push({\r\n                            path: \"/index\",\r\n                            query: {username: response.data.data.username}\r\n                        });\r\n                        console.log(response.data);\r\n                        this.$message.success(response.data.msg)\r\n                        // } else\r\n                        //{\r\n                        //     console.log(response.data);\r\n                        //     this.$message.error(this.form.username + response.data.msg)\r\n                        //}\r\n                    })\r\n                } else {\r\n                    this.dialogVisible = true;\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.login-box {\r\n    border: 1px solid #DCDFE6;\r\n    width: 350px;\r\n    margin: 50px auto;\r\n    padding: 35px 35px 15px 35px;\r\n    border-radius: 5px;\r\n    -webkit-border-radius: 5px;\r\n    -moz-border-radius: 5px;\r\n    box-shadow: 0 0 25px #909399;\r\n}\r\n\r\n.login-title {\r\n    text-align: center;\r\n    margin: 0 auto 40px auto;\r\n    color: #303133;\r\n}\r\n</style>\r\n"],"mappings":";AA4BA;EACAA,IAAA;EACAC,KAAA;IACA;MAEAC,IAAA;QACAC,QAAA;QACAC,QAAA;MACA;MACA;MACAC,KAAA;QACAF,QAAA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;QACAJ,QAAA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;MACA;MACAC,aAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAA,WAAAA,CAAA;MACAC,OAAA,CAAAC,GAAA;IACA;IACAC,SAAAC,QAAA;MACA;MACA,KAAAC,KAAA,CAAAD,QAAA,EAAAE,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAC,MAAA,CAAAC,IAAA;YACAjB,QAAA,OAAAD,IAAA,CAAAC,QAAA;YACAC,QAAA,OAAAF,IAAA,CAAAE;UACA,GAAAiB,IAAA,CAAAC,QAAA;YACA;YACA;YACA,KAAAC,OAAA,CAAAC,IAAA;cACAC,IAAA;cACAC,KAAA;gBAAAvB,QAAA,EAAAmB,QAAA,CAAArB,IAAA,CAAAA,IAAA,CAAAE;cAAA;YACA;YACAS,OAAA,CAAAC,GAAA,CAAAS,QAAA,CAAArB,IAAA;YACA,KAAA0B,QAAA,CAAAC,OAAA,CAAAN,QAAA,CAAArB,IAAA,CAAA4B,GAAA;YACA;YACA;YACA;YACA;YACA;UACA;QACA;UACA,KAAApB,aAAA;UACA;QACA;MACA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}